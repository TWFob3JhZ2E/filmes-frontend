<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Assistir Filme ou Série</title>
    <link rel="stylesheet" href="../GERAL/StyleWatch.css" />
    <link rel="icon" href="../FrontEnd/IMG/Logo1.png" type="image/x-icon">
</head>

<body>

    <script type='text/javascript' src='//pl26406772.profitableratecpm.com/0b/73/65/0b7365ebd4545106b28e83b5bf977aa1.js'></script>

    <header>
        <div class="logo">
            <h1>StarMovies</h1>
        </div>
        <nav>
            <ul>
                <li><a href="../index.html">Início</a></li>
                <li><a href="filmes.html">Filmes</a></li>
                <li><a href="series.html">Séries</a></li>
            </ul>
        </nav>
    </header>

    <!-- Banner acima do player -->
    <script type="text/javascript">
        atOptions = {
            'key' : 'b38227437180d69db263a0b06fc48d56',
            'format' : 'iframe',    
            'height' : 90,
            'width' : 728,
            'params' : {}
        };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/b38227437180d69db263a0b06fc48d56/invoke.js"></script>
    </div>

    <!-- Container do Player -->
    <div id="player-container">
        <h2 id="titulo-serie">Carregando título...</h2>
        <iframe id="player" frameborder="0" allowfullscreen style="width: 100%; height: 500px;"></iframe>
        <div id="movie-name"></div>
    </div>

    <!-- Seção de Propagandas -  ads-container tire do css-->
    <div> 
        <h3>Publicidade</h3>
        <div>        
            <script type="text/javascript">
                atOptions = {
                    'key' : 'ce04a28c61dd91222942a54edcdfefa3',
                    'format' : 'iframe',
                    'height' : 250,
                    'width' : 300,
                    'params' : {}
                };
            </script>
            <script type="text/javascript" src="//www.highperformanceformat.com/ce04a28c61dd91222942a54edcdfefa3/invoke.js"></script>

            <script type="text/javascript">
                atOptions = {
                    'key' : 'ce04a28c61dd91222942a54edcdfefa3',
                    'format' : 'iframe',
                    'height' : 250,
                    'width' : 300,
                    'params' : {}
                };
            </script>
            <script type="text/javascript" src="//www.highperformanceformat.com/ce04a28c61dd91222942a54edcdfefa3/invoke.js"></script>
        </div>
    </div>

    <script type="text/javascript">
        atOptions = {
            'key' : 'b38227437180d69db263a0b06fc48d56',
            'format' : 'iframe',    
            'height' : 90,
            'width' : 728,
            'params' : {}
        };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/b38227437180d69db263a0b06fc48d56/invoke.js"></script>
    </div>


    <footer>
        <p>&copy; 2025 StarMovies. Todos os direitos reservados.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get("id");
            const season = urlParams.get("season");
            const episode = urlParams.get("episode");

            if (!id) {
                document.getElementById("player-container").innerHTML = "<p>Filme ou Série não encontrado.</p>";
                return;
            }

            const tipo = id.startsWith("tt") ? "filme" : "serie";
            let playerUrl = `https://superflixapi.co/${tipo}/${id}`;
            if (tipo === "serie" && season && episode) {
                playerUrl += `/${season}/${episode}`;
            }

            const parametros = "#noLink#noEpList#color:6c5ce7#transparent";
            document.getElementById("player").src = playerUrl + parametros;

            const endpoint = tipo === "filme"
                ? `http://127.0.0.1:5001/filme/titulo?id=${id}`
                : `http://127.0.0.1:5001/serie/titulo?id=${id}`;

            try {
                const res = await fetch(endpoint);
                const data = await res.json();
                const titulo = data.titulo || id;

                document.getElementById("titulo-serie").textContent = `Assistindo: ${titulo}`;
                document.getElementById("movie-name").textContent =
                    `ID: ${id}` +
                    (season ? ` | Temporada ${season}` : '') +
                    (episode ? ` | Episódio ${episode}` : '');
            } catch (e) {
                console.error("Erro ao buscar título:", e);
                document.getElementById("titulo-serie").textContent = `Assistindo: ${id}`;
            }
        });
    </script>
    
</body>

</html>