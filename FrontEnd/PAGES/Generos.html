<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gêneros de Filmes, Séries e Animes - MyStarMovies</title>
    <link rel="stylesheet" href="../GERAL/Generos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <meta name="description"
        content="Assista a filmes, séries e animes online grátis no MyStarMovies. Encontre os melhores títulos em HD, com legendas e dublagem, incluindo ação, comédia, drama e mais!">
    <meta name="keywords"
        content="filmes online, séries online, animes online, streaming grátis, assistir filmes, MyStarMovies, MyMovies, MoviesStar, filmes HD, séries legendadas, animes legendados, ação, comédia, drama, filmes free, séries grátis, animes grátis, assistir grátis, filmes dublados, séries dubladas, animes dublados, filmes e séries, assistir filmes online">
    <link rel="icon" href="../IMG/Logo1.png" type="image/x-icon">
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Poppins:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <script type='text/javascript' src='//pl26405977.profitableratecpm.com/7e/bc/a7/7ebca770d2d09177cb9201776042c1d5.js'
        defer></script>
</head>

<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <h1>MyStarMovies</h1>
            </div>
            <nav>
                <div class="hamburger" aria-label="Menu de navegação" role="button" tabindex="0">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <ul>
                    <li><a href="../index.html">Início</a></li>
                    <li><a href="/PAGES/filmes.html">Filmes</a></li>
                    <li><a href="/PAGES/series.html">Séries</a></li>
                    <li><a href="/PAGES/Animes.html">Animes</a></li>
                    <li><a href="/PAGES/Generos.html">Gêneros</a></li>
                    <li><a href="/PAGES/sobre.html">Sobre</a></li>
                    <li class="search">
                        <form id="search-form" style="position: relative;">
                            <input type="text" id="search" placeholder="Buscar filmes, séries ou animes..."
                                autocomplete="off" oninput="buscarSugestoes(this.value)"
                                aria-label="Buscar filmes, séries ou animes">
                            <button type="submit" aria-label="Pesquisar"><i class="fas fa-search"></i></button>
                            <div id="sugestoes"></div>
                        </form>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Descubra Gêneros de Filmes, Séries e Animes</h1>
            <p>Explore uma ampla variedade de gêneros para todos os gostos!</p>
        </div>
    </section>

    <!-- Loader -->
    <div id="loader" class="loader">
        <div class="spinner"></div>
        <p>Carregando gêneros...</p>
    </div>

    <!-- Gêneros Section -->
    <section class="destaques">
        <h2>Principais Gêneros</h2>
        <div class="category-selector">
            <label for="category">Escolha uma categoria:</label>
            <select id="category" onchange="atualizarGeneros()" aria-label="Selecionar categoria">
                <option value="todos">Todos</option>
                <option value="filme">Filmes</option>
                <option value="serie">Séries</option>
                <option value="anime">Animes</option>
            </select>
        </div>
        <div class="destaques-container">
            <button class="scroll-btn left" aria-label="Rolar para a esquerda"><i
                    class="fas fa-chevron-left"></i></button>
            <div class="destaques-cards" id="genre-container">
                <!-- Os cards de gênero serão preenchidos dinamicamente -->
            </div>
            <button class="scroll-btn right" aria-label="Rolar para a direita"><i
                    class="fas fa-chevron-right"></i></button>
        </div>
    </section>

    <!-- Ad: One 300x250 (After Genres) -->
    <div class="ad-container ad-300x250">
        <div class="anuncio">
            <script type="text/javascript">
                atOptions = {
                    'key': 'ce04a28c61dd91222942a54edcdfefa3',
                    'format': 'iframe',
                    'height': 250,
                    'width': 300,
                    'params': {}
                };
            </script>
            <script type="text/javascript"
                src="//www.highperformanceformat.com/ce04a28c61dd91222942a54edcdfefa3/invoke.js" defer></script>
        </div>
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3>MyStarMovies</h3>
                <p>Explore um universo de filmes, séries e animes com a melhor curadoria de conteúdo.</p>
            </div>
            <div class="footer-section">
                <h3>Navegação</h3>
                <ul>
                    <li><a href="../index.html">Início</a></li>
                    <li><a href="/PAGES/filmes.html">Filmes</a></li>
                    <li><a href="/PAGES/series.html">Séries</a></li>
                    <li><a href="/PAGES/Animes.html">Animes</a></li>
                    <li><a href="/PAGES/Generos.html">Gêneros</a></li>
                    <li><a href="/PAGES/sobre.html">Sobre</a></li>
                </ul>
            </div>
            <div class="footer-section">
                </ H3>
            </div>
        </div>
        <p>© 2025 MyStarMovies - Todos os direitos reservados.</p>
    </footer>

    <!-- Floating Ad -->
    <script async="async" data-cfasync="false"
        src="//pl26406530.profitableratecpm.com/6212237595b591e4197a075fd5b8b929/invoke.js" defer></script>
    <div id="container-6212237595b591e4197a075fd5b8b929"></div>

    <script src="../Conex/Config.js" defer></script>
    <script src="../pesqui.js" defer></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const loader = document.getElementById("loader");
            window.addEventListener("load", () => {
                loader.classList.add("hidden");
            });

            // Hamburger menu toggle
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('nav ul');
            hamburger.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                hamburger.classList.toggle('open');
            });
            hamburger.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    navMenu.classList.toggle('active');
                    hamburger.classList.toggle('open');
                }
            });

            // Scroll buttons for horizontal list
            const container = document.querySelector('.destaques-cards');
            const scrollLeftBtn = document.querySelector('.scroll-btn.left');
            const scrollRightBtn = document.querySelector('.scroll-btn.right');

            scrollLeftBtn.addEventListener('click', () => {
                container.scrollBy({ left: -300, behavior: 'smooth' });
            });

            scrollRightBtn.addEventListener('click', () => {
                container.scrollBy({ left: 300, behavior: 'smooth' });
            });

            // Carregar gêneros iniciais
            atualizarGeneros();
        });

        // Mapeamento de gêneros para subgêneros
        const generosMap = {
            'Ação': ['Action', 'Action Epic'],
            'Animação': ['Animation', 'Computer Animation'],
            'Aventura': ['Adventure', 'Animal Adventure'],
            'SuperHeroi': ['Superhero'],
            'Comédia': ['Comedy', 'Teen Comedy', 'Dark Comedy'],
            'Aliens': ['Alien Invasion', 'Alien'],
            'Crime': ['Crime', 'Drug Crime'],
            'Drama': ['Drama'],
            'Família': ['Family'],
            'Fantasia': ['Fantasy', 'Dark Fantasy'],
            'Faroeste': ['Western'],
            'Ficção Científica': ['Science Fiction'],
            'Guerra': ['War'],
            'História': ['History'],
            'Biografia': ['Biography'],
            'Lançamento': ['Lançamentos'],
            'Mistério': ['Mystery'],
            'Música': ['Music'],
            'Luta': ['Boxing'],
            'Nacional': ['Nacional'],
            'Romance': ['Romance', 'Tragic Romance', 'Romantic Comedy'],
            'Suspense': ['Suspense', 'Psychological Thriller', 'Thriller'],
            'Terror': ['Horror', 'Supernatural Horror']
        };

        // Imagens para os cards de gênero
        const generoImages = {
            'Ação': '/capas/WICK.jpg',
            'Animação': '/capas/diverti.png',
            'Aventura': '/capas/jurasiic.jpg',
            'Comédia': 'https://www.rbsdirect.com.br/imagesrc/24591869.jpg?format=webp&w=1600&h=400&a=c',
            'Crime': '/capas/Poderoso.jpg',
            'Drama': '/capas/milagre.jpg',
            'Família': '/capas/Paddington.jpg',
            'Fantasia': '/capas/aneis.jpg',
            'Faroeste': '/capas/333.jpg',
            'Ficção Científica': '/capas/interestelar.jpg',
            'Guerra': '/capas/homem.jpg',
            'História': '/capas/lista.png',
            'Lançamento': '/capas/premonicao.jpg',
            'Aliens': 'https://cinepop.com.br/wp-content/uploads/2024/06/alien-romulus.jpg',
            'SuperHeroi': '/capas/marve.jpg',
            'Biografia': 'https://cdn.paperspost.com.br/wp-content/uploads/2023/07/Oppenheimer-1.jpg',
            'Luta': 'https://filmes.band.uol.com.br/wp-content/uploads/2018/05/Veia-de-lutador-channing-tatum-1280x720.jpg',
            'Mistério': '/capas/lugars.jpg',
            'Música': '/capas/bohemian.jpg',
            'Nacional': '/capas/cidadeDeus.jpg',
            'Romance': '/capas/acontece.jpg',
            'Suspense': '/capas/absolutocinema.jpg',
            'Terror': '/capas/muilhor.jpeg'
        };

        async function atualizarGeneros() {
            const categorySelect = document.getElementById('category');
            const genreContainer = document.getElementById('genre-container');
            const tipo = categorySelect.value;

            genreContainer.innerHTML = '<p>Carregando gêneros...</p>';

            try {
                const response = await fetch(`${BACKEND_URL}/listar_generos?tipo=${tipo}`, {
                    headers: { 'X-API-Key': API_KEY }
                });

                if (!response.ok) {
                    throw new Error(`Erro ${response.status}: ${await response.text()}`);
                }

                const generos = await response.json();

                genreContainer.innerHTML = '';
                if (!Array.isArray(generos) || generos.length === 0) {
                    genreContainer.innerHTML = '<p>Nenhum gênero disponível para esta categoria.</p>';
                    return;
                }

                generos.forEach(genero => {
                    // Encontrar o nome de exibição correspondente no generosMap
                    const displayGenero = Object.keys(generosMap).find(key =>
                        generosMap[key].some(g => g.toLowerCase() === genero.toLowerCase())
                    ) || genero;

                    const genreCard = document.createElement('div');
                    genreCard.classList.add('genre-card');
                    genreCard.style.backgroundImage = `url('${generoImages[displayGenero] || 'https://via.placeholder.com/300'}')`;
                    genreCard.innerHTML = `<h3>${displayGenero}</h3>`;
                    genreCard.setAttribute('role', 'button');
                    genreCard.setAttribute('tabindex', '0');
                    genreCard.setAttribute('aria-label', `Filtrar por ${displayGenero}`);
                    genreCard.onclick = () => filtrarPorGenero(displayGenero, tipo);
                    genreCard.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            filtrarPorGenero(displayGenero, tipo);
                        }
                    });
                    genreContainer.appendChild(genreCard);
                });

                // Reaplicar eventos de teclado para novos cards
                document.querySelectorAll('.genre-card').forEach(card => {
                    card.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            card.click();
                        }
                    });
                });
            } catch (error) {
                console.error('Erro ao carregar gêneros:', error);
                genreContainer.innerHTML = '<p>Erro ao carregar gêneros. Verifique sua conexão ou tente novamente mais tarde.</p>';
            }
        }

        function filtrarPorGenero(generoDisplay, tipo) {
            const generos = generosMap[generoDisplay] || [generoDisplay];
            const generosQuery = generos.map(g => encodeURIComponent(g)).join(',');
            const tipoQuery = tipo && tipo !== 'todos' ? `&tipo=${tipo}` : '';
            window.location.href = `/PAGES/resultados.html?generos=${generosQuery}${tipoQuery}`;
        }

        async function buscarGeneros(query) {
            const sugestoesDiv = document.getElementById('sugestoes');
            sugestoesDiv.innerHTML = '';

            if (!query || query.length < 2) return;

            const categorySelect = document.getElementById('category');
            const tipo = categorySelect.value;

            try {
                const response = await fetch(`${BACKEND_URL}/listar_generos?tipo=${tipo}`, {
                    headers: { 'X-API-Key': API_KEY }
                });

                if (!response.ok) {
                    throw new Error(`Erro ${response.status}: ${await response.text()}`);
                }

                const generos = await response.json();

                if (!Array.isArray(generos) || generos.length === 0) {
                    sugestoesDiv.innerHTML = '<div class="sugestao-item"><span>Nenhum gênero encontrado</span></div>';
                    return;
                }

                // Filtrar gêneros com base no termo de busca
                const sugestoes = generos.filter(g => g.toLowerCase().includes(query.toLowerCase()));

                if (sugestoes.length === 0) {
                    sugestoesDiv.innerHTML = '<div class="sugestao-item"><span>Nenhum gênero encontrado</span></div>';
                    return;
                }

                sugestoes.forEach(genero => {
                    const displayGenero = Object.keys(generosMap).find(key =>
                        generosMap[key].some(g => g.toLowerCase() === genero.toLowerCase())
                    ) || genero;

                    const sugestao = document.createElement('div');
                    sugestao.classList.add('sugestao-item');
                    sugestao.innerHTML = `<span>${displayGenero}</span>`;
                    sugestao.onclick = () => {
                        document.getElementById('search').value = displayGenero;
                        sugestoesDiv.innerHTML = '';
                        filtrarPorGenero(displayGenero, tipo);
                    };
                    sugestao.setAttribute('role', 'button');
                    sugestao.setAttribute('tabindex', '0');
                    sugestao.setAttribute('aria-label', `Selecionar gênero ${displayGenero}`);
                    sugestao.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            sugestao.click();
                        }
                    });
                    sugestoesDiv.appendChild(sugestao);
                });
            } catch (error) {
                console.error('Erro ao buscar gêneros:', error);
                sugestoesDiv.innerHTML = '<div class="sugestao-item"><span>Erro ao carregar sugestões</span></div>';
            }
        }
    </script>
</body>

</html>